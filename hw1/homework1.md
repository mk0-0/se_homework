# 超文本传输协议HTTP

## 概念
超文本传输协议（Hyper Text Transfer Protocol，HTTP）是一个简单的请求-响应协议，它通常运行在[TCP](https://baike.baidu.com/item/TCP/33012)之上。它指定了客户端可能发送给服务器什么样的消息以及得到什么样的响应。请求和响应消息的头以[ASCII](https://baike.baidu.com/item/ASCII/309296)形式给出；而消息内容则具有一个类似[MIME](https://baike.baidu.com/item/MIME/2900607)的格式。这个简单模型是早期[Web](https://baike.baidu.com/item/Web/150564)成功的有功之臣，因为它使开发和部署非常地直截了当。

## 应用场景
HTTP诞生之初主要是应用于WEB端内容获取，那时候内容还不像现在这样丰富，排版也没那么精美，用户交互的场景几乎没有。对于这种简单的获取网页内容的场景，HTTP表现得还算不错。但随着互联网的发展和WEB2.0的诞生，更多的内容开始被展示（更多的图片文件），排版变得更精美（更多的CSS），更复杂的交互也被引入（更多的JS）。用户打开一个网站首页所加载的数据总量和请求的个数也在不断增加。
![应用场景](https://bkimg.cdn.bcebos.com/pic/8c1001e93901213f33bd9ec059e736d12f2e9524?x-bce-process=image/watermark,image_d2F0ZXIvYmFpa2U4MA==,g_7,xp_5,yp_5/format,f_auto)
*今天绝大部分的门户网站首页大小都会超过2M，请求数量可以多达100个。另一个广泛的应用是在移动互联网的客户端app，不同性质的app对HTTP的使用差异很大。对于电商类app，加载首页的请求也可能多达10多个。对于微信这类IM，HTTP请求可能仅限于语音和图片文件的下载，请求出现的频率并不算高。*

## 工作原理
HTTP是**基于客户/服务器模式**，且面向连接的。典型的HTTP事务处理有如下的过程：
1. 客户与服务器建立连接；
2. 客户向服务器提出请求；
3. 服务器接受请求，并根据请求返回相应的文件作为应答；
4. 客户与服务器关闭连接。
> 客户与服务器之间的HTTP连接是一种一次性连接，它限制每次连接只处理一个请求，当服务器返回本次请求的应答后便立即关闭连接，下次请求再重新建立连接。这种一次性连接主要考虑到WWW服务器面向的是Internet中成千上万个用户，且只能提供有限个连接，故服务器不会让一个连接处于等待状态，及时地释放连接可以大大提高服务器的执行效率。

## 报文格式
HTTP报文由**从客户机到服务器的请求**和**从服务器到客户机的响应**构成。
- 请求报文：请求行 － 通用信息头 － 请求头 － 实体头 － 报文主体
- 应答报文：状态行 － 通用信息头 － 响应头 － 实体头 － 报文主体

## 状态消息
2xx：成功
|消息|描述|
|--|--|
|200 OK|请求成功（其后是对GET和POST请求的应答文档。）|
|201 Created|请求被创建完成，同时新的资源被创建。|
|202 Accepted|供处理的请求已被接受，但是处理未完成。|
|203 Non-authoritative Information|文档已经正常地返回，但一些应答头可能不正确，因为使用的是文档的拷贝。|
|204 No Content|没有新文档。浏览器应该继续显示原来的文档。如果用户定期地刷新页面，而Servlet可以确定用户文档足够新，这个状态代码是很有用的。|
|205 Reset Content|没有新文档。但浏览器应该重置它所显示的内容。用来强制浏览器清除表单输入内容。|
|206 Partial Content|客户发送了一个带有Range头的GET请求，服务器完成了它。|